<mvc:View
    controllerName="sdmcoletor.controller.Object"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"    
    xmlns:semantic="sap.f.semantic"  
    xmlns:core="sap.ui.core"
    	
     >
    <semantic:SemanticPage
        id="idMainSemanticPage"
        class="zoom70-"
        headerPinnable="false"
        toggleHeaderOnTitleClick="false"
        busy="{objectView>/busy}"
        busyIndicatorDelay="{objectView>/delay}" 
        showFooter="true">
        <!-- Cabeçalho expandido acima dos botões -->
        <semantic:titleExpandedContent>
            <HBox id="idHbx1">
                <Title  id="idTtl1"  text="Movimentação de LPNs" level="H3" />
            </HBox>
            <HBox  id="idHbx2">
                <Title id="idTx1" text="Trabalhando com DU: " level="H2" />
                <Title id="idTx2"  text="{DUModel>/duAtiva}" level="H4"/>
            </HBox>
        </semantic:titleExpandedContent>
        <semantic:titleHeading>
            <Title id="idLpnTitle" title="{i18n>worklistTitle}" text="{lpn}" level="H3"/>
        </semantic:titleHeading>
        <semantic:headerContent>
            <FlexBox id="idMainFlexBox" width="100%" height="auto" alignItems="Start">
                <Panel id="idMainPanel1" backgroundDesign="Transparent">
                    <HBox  id="idHbx3" justifyContent="Start" alignItems="Center" class="sapUiSmallMarginBottom" >
                        <VBox  id="idVbx1" class="sapUiSmallMarginEnd" >
                            <Label  id="idLbTx1" text="Deposito Destino :  ." labelFor="idSelectHeaderDepDestino"/>
                            <!--  
                            <Select
                            id="idSelectHeaderDepDestino"
                            items="{DepDestinoConcat>/ }"
                            selectedKey="{/depositoSelecionado}"
                            change=".onChangeDepoDestHeader">
                                <core:Item key="{DepDestinoConcat>DEPOSITO}" text="{DepDestinoConcat>TEXTO}" />
                            </Select>   -->
                            <ComboBox
                                id="idSelectHeaderDepDestino"
                                width="6.7rem"
                                required="true"
                                 selectedKey="{/depositoSelecionado}"
                                change=".onChangeDepoDestHeader"
                                placeholder="Todos"  
                               items="{DepDestinoConcat>/}">
                                <!-- Item vazio para forçar placeholder -->
                                <core:Item key="" text="" />
                                <core:Item  id="idCr31"  key="{DepDestinoConcat>DEPOSITO}" text="{DepDestinoConcat>TEXTO}" />
                            </ComboBox>
                        </VBox>
                        <VBox id="idVbx3" class="sapUiSmallMarginEnd" >
                            <Label  id="idLblTx1"  text="Posição Destino :  ." labelFor="idSelectPosDestino"/>
                            <!-- Cabeçalho expandido acima dos botões 
                            <Select
                                id="idSelectPosDestino"
                                width="10rem"
                                items="{PosDestinoConcat>/}">
                                <core:Item key="{PosDestinoConcat>POSICAO}" text="{PosDestinoConcat>TEXTO}" />
                            </Select> -->
                            <ComboBox
                                id="idSelectPosDestino"
                                width="6.7rem"
                                items="{PosDestinoConcat>/}"                                
                                selectedKey="{/depositoSelecionado}"
                                change=".onChangePosiDestHeader"
                                placeholder="Todos"  
                               >
                                <core:Item  id="idCr1"  key="{PosDestinoConcat>POSICAO}" text="{PosDestinoConcat>TEXTO}" />
                            </ComboBox>
                        </VBox>
                        <VBox  id="idVbx2" class="sapUiSmallMarginEnd" >
                            <Label  id="idLbTxl2" text=" "/>
                            <Button
                                id="idAplicarButton"
                                text="Aplicar"
                                type="Emphasized"
                                press=".onAplicarButtonPress"/>
                        </VBox>
                        <VBox id="idVbx4" class="sapUiSmallMarginEnd" >
                            <Label  id="idLbBtl2" text=" "/>
                            <Button  id="idBt1" text="Save" press=".onSalvarPress" type="Emphasized" icon="sap-icon://save" />
                        </VBox>
                        <VBox  id="idVVx1" class="sapUiSmallMarginEnd" >
                            <Label  id="idLbTxl1" text=" "/>
                            <Button
                                id="idVoltarWorklistButton"
                                icon="sap-icon://nav-back"
                                 text="Volt."
                                press=".onNavBack"/>
                        </VBox>
                    </HBox>
                </Panel>
            </FlexBox>
        </semantic:headerContent>
        <semantic:content>
            <Table
                id="objectTable"
                width="100%"
                items="{
                path: 'SelecionadosParaTransporte>/' ,
                        sorter: [
            { path: 'centro',          descending: false },
            { path: 'deposito_origem', descending: false },
            { path: 'posicao_origem',  descending: false }]    
                }" 
                noDataText="{worklistView>/tableNoDataText}"
                busyIndicatorDelay="{worklistView>/tableBusyDelay}"
                   mode="MultiSelect"
                   selectionChange=".onSelectChange"
                   growingThreshold="18"
                growing="true"
                growingScrollToLoad="true"
                updateFinished=".onUpdateFinished">
                <columns>
                    <Column id="nameColumnObj" width="3.0rem" >
                        <Text text="{i18n>tableNameColumnTitle}" textAlign="Left" id="nameColumnTitleObj"/>
                    </Column>
                    <Column id="depositoOrigemColumnObj" width="3.0rem">
                        <Text text="{i18n>depositOrigemLabel}" textAlign="Left" id="depositoOrigemColumnTitleObj"/>
                    </Column>
                    <Column id="posicaoOrigemColumnObj" width="3.0rem">
                        <Text text="{i18n>posOrigLabel}" textAlign="Left" id="posicaoOrigemColumnTitleObj"/>
                    </Column>
                    <Column id="loteSDMColumnObj" width="3.0rem">
                        <Text text="{i18n>lSDMLabel}" textAlign="Left" id="loteSDMColumnTitleObj"/>
                    </Column>
                    <Column id="depositoDestinoColumnObj" width="6.7rem">
                        <Text text="{i18n>depositoDestinoLabel}" textAlign="Left" id="depositoDestinoColumnTitleObj"/>
                    </Column>
                    <Column id="posicaoDestinoColumnObj" width="6.7rem">
                        <Text text="{i18n>posDstLabel}" textAlign="Left" id="posicaoDestinoColumnTitleObj"/>
                    </Column>
           <!--         <Column id="materialColumnObj">
                        <Text text="{i18n>materialLabel}" id="materialColumnTitleObj"/>
                    </Column>  -->
                </columns>
                <items>
                    <ColumnListItem  id="idCl1" 
                        type="Inactive"
                        press=".onPresst" 
                         highlight="{= ${SelecionadosParaTransporte>DU} === 'BLOQ.' ? 'Error' : ${SelecionadosParaTransporte>DU} === 'LIB.' ? 'Success' : 'None'}">
                        <cells>
                            <Text id="idTxx2"  text="{SelecionadosParaTransporte>lpn}"             width="3.0rem"/>
                            <Text id="idTxx3"  text="{SelecionadosParaTransporte>deposito_origem}" width="3.0rem"/>
                            <Text id="idTxx1"  text="{SelecionadosParaTransporte>posicao_origem}"  width="3rem"/>
                            <Text id="idTxx4"  text="{SelecionadosParaTransporte>lote_sdm}"        width="3rem"/>
                            <ComboBox
                                    id="idSelectDepDestino"
                                    items="{DepDestinoConcat>/}"
                                    selectedKey="{SelecionadosParaTransporte>deposito_destino}"
                                    placeholder="-"
                                    width="6.7rem"
                                    change=".onChangeDepositoDestino">
                                <core:Item id="tplDepDestino" key="{DepDestinoConcat>DEPOSITO}" text="{DepDestinoConcat>TEXTO}" />
                            </ComboBox>
                            <ComboBox
                                    id="idSelectPosDest"
                                    items="{PosDestinoConcatFull>/}"
                                    selectedKey="{SelecionadosParaTransporte>posicao_destino}"
                                    placeholder="-"
                                    width="6.7rem"
                                    change=".onChangeposicaoDestino">
                                <core:Item id="tplPosDestino" key="{PosDestinoConcatFull>POSICAO}" text="{PosDestinoConcatFull>TEXTO}" />
                            </ComboBox>
                           <!-- <Text id="idTx21"  text="{SelecionadosParaTransporte>material}" width="2.5rem"/>   -->
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </semantic:content>
   </semantic:SemanticPage>
</mvc:View>